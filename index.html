<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Rakshabandhan | Celebrating Sibling Bonds</title>
    <meta name="description" content="Send beautiful Rakshabandhan wishes to your loved ones">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #e83e8c;
            --secondary-color: #6f42c1;
            --accent-color: #ffc107;
            --text-color: #333;
            --light-bg: #f9f5ff;
            --white: #ffffff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-bg);
            background-image: radial-gradient(circle at 10% 20%, rgba(255, 200, 239, 0.1) 0%, rgba(255, 255, 255, 1) 90%);
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--white);
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            padding: 2.5rem;
            position: relative;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        h1 {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 2.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }
        
        .subtitle {
            font-size: 1.1rem;
            text-align: center;
            color: #666;
            margin-bottom: 2.5rem;
            font-weight: 300;
        }
        
        .image-container {
            margin: 2rem auto;
            max-width: 600px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .image-container:hover {
            transform: translateY(-5px);
        }
        
        .image-container img {
            width: 100%;
            display: block;
            height: auto;
            object-fit: cover;
        }
        
        .message {
            margin: 2rem auto;
            max-width: 600px;
            font-size: 1.1rem;
            text-align: center;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            position: relative;
        }
        
        .message::before {
            content: '"';
            position: absolute;
            font-size: 5rem;
            color: rgba(232, 62, 140, 0.1);
            top: -1.5rem;
            left: 0;
            line-height: 1;
            font-family: 'Playfair Display', serif;
        }
        
        .progress-share-section {
            margin: 3rem auto;
            max-width: 600px;
            text-align: center;
        }
        
        .progress-container {
            margin-bottom: 2rem;
        }
        
        .progress-text {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: #666;
        }
        
        .progress-bar {
            height: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
            margin-bottom: 1.5rem;
        }
        
        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 5px;
            transition: width 0.5s ease, box-shadow 0.5s ease;
        }
        
        .bloom {
            animation: bloom 1s ease forwards;
            box-shadow: 0 0 15px var(--primary-color);
        }
        
        @keyframes bloom {
            0% { box-shadow: 0 0 5px var(--primary-color); }
            50% { box-shadow: 0 0 25px var(--primary-color); }
            100% { box-shadow: 0 0 15px var(--primary-color); }
        }
        
        .share-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(232, 62, 140, 0.3);
            display: inline-flex;
            align-items: center;
            font-weight: 500;
            margin: 0 auto;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(232, 62, 140, 0.4);
        }
        
        .share-btn i {
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .celebration {
            text-align: center;
            margin: 1rem 0 2rem;
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .wheel-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 3rem auto;
            padding: 2rem 0;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            position: relative;
            max-width: 600px;
        }
        
        .wheel-title {
            font-family: 'Playfair Display', serif;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }
        
        .wheel-wrapper {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto 2rem;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            position: relative;
            border-radius: 50%;
            overflow: hidden;
            border: 8px solid #fff;
            box-shadow: 0 0 0 8px var(--primary-color), 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            transform: rotate(0deg);
        }
        
        .wheel-section {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            left: 0;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.2rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            clip-path: polygon(0% 0%, 100% 0%, 50% 100%);
        }
        
        .wheel-center {
            position: absolute;
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 5;
            border: 5px solid var(--primary-color);
            box-shadow: 0 0 0 5px rgba(255,255,255,0.8);
        }
        
        .wheel-pointer {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%) rotate(180deg);
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 10;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.3));
        }
        
        .spin-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(232, 62, 140, 0.3);
            font-weight: 500;
            display: flex;
            align-items: center;
        }
        
        .spin-btn:disabled {
            background: #ddd;
            cursor: not-allowed;
            box-shadow: none;
            transform: none !important;
        }
        
        .spin-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(232, 62, 140, 0.4);
        }
        
        .spin-btn i {
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .spin-count {
            margin-top: 0.5rem;
            font-size: 1rem;
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .result {
            margin-top: 1.5rem;
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary-color);
            min-height: 2rem;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: rgba(232, 62, 140, 0.1);
            display: inline-block;
        }
        
        .custom-alert {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .alert-content {
            background-color: white;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .alert-title {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-weight: bold;
        }
        
        .alert-message {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: var(--text-color);
        }
        
        .withdraw-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(232, 62, 140, 0.3);
            font-weight: 500;
            margin-top: 1rem;
            display: inline-flex;
            align-items: center;
        }
        
        .withdraw-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(232, 62, 140, 0.4);
        }
        
        footer {
            margin-top: 3rem;
            text-align: center;
            font-size: 0.9rem;
            color: #888;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
                border-radius: 12px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .message {
                padding: 1rem;
                font-size: 1rem;
            }
            
            .wheel-wrapper {
                width: 280px;
                height: 280px;
            }
            
            .wheel-title {
                font-size: 1.3rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1>Happy Rakshabandhan</h1>
        <p class="subtitle">Celebrating the Eternal Bond Between Brothers and Sisters</p>
        
        <div class="image-container">
            <img src="raksha.png" alt="Rakshabandhan Celebration">
        </div>
        
        <div class="message">
            On this auspicious occasion of Rakshabandhan, I wish you happiness, prosperity, and endless joy. 
            May this sacred thread strengthen our bond and bring blessings to our lives. 
            No matter where life takes us, this bond will always remain special.
        </div>
        
        <div class="progress-share-section">
            <div class="progress-container">
                <div class="progress-text">Spread the joy: <span id="share-count">0</span>/25 shares</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="celebration" id="celebration" style="display: none;">
                    <i class="fas fa-sparkles"></i> You earned a spin!
                </div>
            </div>
            
            <button class="share-btn" id="share-btn">
                <i class="fab fa-whatsapp"></i> Share on WhatsApp
            </button>
        </div>
        
        <div class="wheel-container">
            <h3 class="wheel-title">Rakhi Gift Wheel</h3>
            <div class="wheel-wrapper">
                <div class="wheel" id="wheel">
                    <!-- Wheel sections will be added by JavaScript -->
                </div>
                <div class="wheel-center"></div>
                <div class="wheel-pointer"></div>
            </div>
            <div class="spin-count" id="spin-count">Spins available: 0</div>
            <button class="spin-btn" id="spin-btn" disabled>
                <i class="fas fa-redo"></i> Spin the Wheel
            </button>
            <div class="result" id="result"></div>
        </div>
    </div>
    
    <div class="custom-alert" id="custom-alert">
        <div class="alert-content">
            <div class="alert-title">Congratulations! ðŸŽ‰</div>
            <div class="alert-message" id="alert-message">You won Rs.100!</div>
            <button class="withdraw-btn" id="withdraw-btn">
                <i class="fas fa-rupee-sign"></i> Withdraw Now
            </button>
        </div>
    </div>
    
    <footer>
        <p>Â© 2023 Rakshabandhan Wishes | Made with <i class="fas fa-heart" style="color: var(--primary-color);"></i></p>
    </footer>
    
    <script>
        // Initialize from local storage
        let shareCount = localStorage.getItem('rakhiShareCount') ? parseInt(localStorage.getItem('rakhiShareCount')) : 0;
        let spinsAvailable = localStorage.getItem('rakhiSpinsAvailable') ? parseInt(localStorage.getItem('rakhiSpinsAvailable')) : 0;
        
        // Ensure spins don't go negative
        if (spinsAvailable < 0) {
            spinsAvailable = 0;
            localStorage.setItem('rakhiSpinsAvailable', 0);
        }
        
        // Wheel configuration
        const wheelPrizes = [
            { text: "100", value: "Rs.100", color: "#FF6384" },
            { text: "120", value: "Rs.120", color: "#36A2EB" },
            { text: "150", value: "Rs.150", color: "#FFCE56" },
            { text: "200", value: "Rs.200", color: "#4BC0C0" },
            { text: "250", value: "Rs.250", color: "#9966FF" },
            { text: "300", value: "Rs.300", color: "#FF9F40" }
        ];
        
        // DOM elements
        const shareBtn = document.getElementById('share-btn');
        const spinBtn = document.getElementById('spin-btn');
        const withdrawBtn = document.getElementById('withdraw-btn');
        
        // Initialize the page
        function initPage() {
            updateProgress(shareCount);
            createWheel();
            document.getElementById('spin-count').textContent = `Spins available: ${spinsAvailable}`;
            spinBtn.disabled = spinsAvailable <= 0;
            
            // Event listeners
            shareBtn.addEventListener('click', shareOnWhatsApp);
            spinBtn.addEventListener('click', spinWheel);
            withdrawBtn.addEventListener('click', withdrawAmount);
        }
        
        // Create wheel sections with centered text
        function createWheel() {
            const wheel = document.getElementById('wheel');
            wheel.innerHTML = '';
            
            const sectionAngle = 360 / wheelPrizes.length;
            
            wheelPrizes.forEach((prize, index) => {
                const section = document.createElement('div');
                section.className = 'wheel-section';
                section.style.backgroundColor = prize.color;
                section.style.transform = `rotate(${sectionAngle * index}deg)`;
                
                const text = document.createElement('div');
                text.textContent = prize.text;
                text.style.position = 'absolute';
                text.style.bottom = '50%';
                text.style.left = '50%';
                text.style.transform = 'translate(-50%, 50%) rotate(30deg)';
                text.style.width = '80px';
                text.style.textAlign = 'center';
                text.style.fontWeight = 'bold';
                text.style.fontSize = '14px';
                text.style.color = 'white';
                text.style.textShadow = '1px 1px 2px rgba(0,0,0,0.5)';
                
                section.appendChild(text);
                wheel.appendChild(section);
            });
        }
        
        function updateProgress(count) {
            const maxShares = 25;
            const sharesPerSpin = 5;
            
            const percentage = Math.min(count, maxShares) * (100/maxShares);
            document.getElementById('progress-fill').style.width = `${percentage}%`;
            document.getElementById('share-count').textContent = count;
            
            const newSpinsAvailable = Math.floor(count / sharesPerSpin);
            
            if (newSpinsAvailable !== spinsAvailable) {
                spinsAvailable = newSpinsAvailable;
                localStorage.setItem('rakhiSpinsAvailable', spinsAvailable);
                document.getElementById('spin-count').textContent = `Spins available: ${spinsAvailable}`;
                
                if (spinsAvailable > 0) {
                    spinBtn.disabled = false;
                    document.getElementById('celebration').style.display = 'block';
                    document.getElementById('progress-fill').classList.add('bloom');
                } else {
                    spinBtn.disabled = true;
                    document.getElementById('celebration').style.display = 'none';
                    document.getElementById('progress-fill').classList.remove('bloom');
                }
            }
        }
        
        function shareOnWhatsApp() {
            const shareUrl = `https://wa.me/?text=${encodeURIComponent('Happy Rakshabandhan! Send beautiful Rakhi wishes ' + window.location.href)}`;
            
            // Open share window
            const newWindow = window.open(shareUrl, '_blank');
            
            // Check if window was opened successfully
            if (newWindow) {
                // Only increment share count after successful share
                setTimeout(() => {
                    shareCount = Math.min(shareCount + 1, 25);
                    localStorage.setItem('rakhiShareCount', shareCount);
                    updateProgress(shareCount);
                    
                    // Show thank you message
                    alert('Thank you for sharing these Rakhi wishes!');
                }, 1000);
            } else {
                alert('Please allow popups to share');
            }
        }
        
        function spinWheel() {
            if (spinsAvailable <= 0) return;
            
            // Immediately deduct spin and update progress
            spinsAvailable--;
            localStorage.setItem('rakhiSpinsAvailable', spinsAvailable);
            
            // Deduct 5 shares (1 spin worth) from progress
            shareCount = Math.max(0, shareCount - 5);
            localStorage.setItem('rakhiShareCount', shareCount);
            
            const wheel = document.getElementById('wheel');
            const result = document.getElementById('result');
            
            // Update UI immediately
            updateProgress(shareCount);
            document.getElementById('spin-count').textContent = `Spins available: ${spinsAvailable}`;
            spinBtn.disabled = true;
            result.textContent = '';
            
            // Random prize selection
            const sectionAngle = 360 / wheelPrizes.length;
            const prizeIndex = Math.floor(Math.random() * wheelPrizes.length);
            const prizeWon = wheelPrizes[prizeIndex].value;
            
            // Calculate rotation
            const segmentCenterAngle = sectionAngle * prizeIndex + sectionAngle/2;
            const rotation = 1800 + (180 - segmentCenterAngle);
            
            wheel.style.transform = `rotate(${rotation}deg)`;
            
            // Show result after animation
            setTimeout(() => {
                result.textContent = `Congratulations! You won ${prizeWon}!`;
                spinBtn.disabled = spinsAvailable <= 0;
                
                showWinAlert(prizeWon);
                
                if (typeof confetti === 'function') {
                    confetti({
                        particleCount: 150,
                        spread: 70,
                        origin: { y: 0.6 },
                        colors: ['#e83e8c', '#6f42c1', '#ffc107']
                    });
                }
            }, 4000);
        }

        function showWinAlert(prize) {
            const alert = document.getElementById('custom-alert');
            const message = document.getElementById('alert-message');
            
            message.textContent = `You won ${prize}!`;
            alert.style.display = 'flex';
        }

        function withdrawAmount() {
            document.getElementById('custom-alert').style.display = 'none';
            window.open('withdrawal.html', '_blank');
        }
        
        // Initialize the page when loaded
        window.addEventListener('DOMContentLoaded', initPage);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</body>
    </html>
